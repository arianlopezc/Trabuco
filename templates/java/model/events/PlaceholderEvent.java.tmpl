package {{.GroupID}}.model.events;

import com.fasterxml.jackson.annotation.JsonSubTypes;
import com.fasterxml.jackson.annotation.JsonTypeInfo;
import java.time.Instant;

/**
 * Sealed interface for placeholder-related events.
 * All placeholder event types must be records that implement this interface.
 *
 * <p>Events are immutable data contracts shared between publishers and consumers.
 * They should contain only the data needed to process the event, not behavior.</p>
 *
 * <p>The {@code @JsonTypeInfo} annotation enables polymorphic deserialization,
 * allowing message brokers to deserialize events to the correct concrete type.</p>
 *
 * <p>Usage:
 * <pre>{@code
 * // Publishing
 * eventPublisher.publish(PlaceholderCreatedEvent.create("123", "My Placeholder"));
 *
 * <p>// Consuming (pattern matching)
 * switch (event) {
 *     case PlaceholderCreatedEvent e -> handleCreated(e);
 *     // Add more cases as event types grow
 * }
 * }</pre>
 * </p>
 */
@JsonTypeInfo(
  use = JsonTypeInfo.Id.NAME,
  include = JsonTypeInfo.As.PROPERTY,
  property = "@type"
)
@JsonSubTypes({
  @JsonSubTypes.Type(value = PlaceholderCreatedEvent.class, name = "PlaceholderCreatedEvent")
})
public sealed interface PlaceholderEvent
  permits PlaceholderCreatedEvent {

  /**
   * Unique event identifier for idempotency and tracing.
   * Consumers should use this to detect duplicate events.
   */
  String eventId();

  /** Timestamp when the event occurred (not when it was published or received). */
  Instant occurredAt();
}
