# MCP Server for {{.ProjectName}}

This project includes an MCP (Model Context Protocol) server that provides AI coding assistants with tools for building, testing, and introspecting the project.

## Available Tools

| Tool | Description |
|------|-------------|
| `build` | Compile the project or a specific module |
| `package` | Package all modules into JAR files |
| `clean` | Clean all build artifacts |
| `test` | Run all tests or tests for a specific module |
| `test-single` | Run a specific test class or method |
| `list-modules` | List all Maven modules in the project |
| `list-entities` | List all entity classes in the Model module |
| `get-config` | Get the application.yml for a module |
| `project-info` | Get project metadata from .trabuco.json |

## Building the MCP Server

The MCP server JAR is built automatically when you run:

```bash
mvn package -DskipTests
```

The executable JAR is located at: `MCP/target/MCP-1.0-SNAPSHOT.jar`

## Registering with AI Coding Assistants

### Automatic Detection (Project-Local Configs)

The following agents **automatically detect** the MCP configuration when you open the project.
On first use, you'll be prompted to approve the server for security reasons.

#### Claude Code

**Config:** `.mcp.json` (project root) - ✅ Auto-detected

1. Open Claude Code in this project directory
2. On first run, you'll see: *"New MCP server found in .mcp.json"*
3. Click **Approve** to enable the server
4. The MCP tools will be available in your conversation

#### Cursor

**Config:** `.cursor/mcp.json` - ✅ Auto-detected

1. Open this project in Cursor
2. On first run, you'll be prompted to approve the MCP server
3. Click **Approve** to enable
4. Verify with a green dot in Settings → Features → MCP

#### VS Code / GitHub Copilot

**Config:** `.vscode/mcp.json` - ✅ Auto-detected

1. Open this project in VS Code (1.102+)
2. Open the `.vscode/mcp.json` file
3. Click the **Start** button that appears at the top
4. The MCP tools will be available in Copilot Chat

### Manual Setup (Global Configs)

The following agents require manual configuration in their global settings files.

#### Windsurf (Codeium)

Add to `~/.codeium/windsurf/mcp_config.json`:

```json
{
  "mcpServers": {
    "{{.ProjectName}}": {
      "command": "java",
      "args": ["-jar", "/full/path/to/{{.ProjectName}}/MCP/target/MCP-1.0-SNAPSHOT.jar"],
      "cwd": "/full/path/to/{{.ProjectName}}"
    }
  }
}
```

Then restart Windsurf or reload MCP servers from the Cascade panel.

#### Cline (VS Code Extension)

Add to your Cline MCP settings (`cline_mcp_settings.json`):

```json
{
  "mcpServers": {
    "{{.ProjectName}}": {
      "command": "java",
      "args": ["-jar", "/full/path/to/{{.ProjectName}}/MCP/target/MCP-1.0-SNAPSHOT.jar"],
      "cwd": "/full/path/to/{{.ProjectName}}"
    }
  }
}
```

Then click the MCP Servers icon in Cline and enable the server.

## Troubleshooting

### Server not starting
- Ensure Java 21+ is installed and in PATH
- Verify the JAR exists: `ls MCP/target/MCP-1.0-SNAPSHOT.jar`
- Rebuild if needed: `mvn package -pl MCP -am -DskipTests`

### Tools not appearing
- Check the MCP server logs: `MCP/mcp-server.log`
- Verify the server starts manually: `java -jar MCP/target/MCP-1.0-SNAPSHOT.jar`
- Restart your AI coding assistant

### Permission errors
- Ensure the JAR file is readable
- On Unix systems: `chmod +r MCP/target/MCP-1.0-SNAPSHOT.jar`
